
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as U}from"./index-eb967e6b.js";import{a as g}from"./config-5832de38.js";import{d as D,R as B,r as b,x as R,o as u,c as d,e as l,f as t,a as V,k as p,N as x,S as y,E as L,h as o,t as P,q as M}from"./index-614bd441.js";const z={class:"flex justify-between"},A=V("b",null,"客户端动态菜单设置参数设置",-1),J=D({__name:"menu",setup(K){const k=[{label:"ChatGpt聊天",path:"Chat"},{label:"Dall-E2绘画",path:"Draw"},{label:"Midjourney绘画",path:"Midjourney"},{label:"Midjourney广场",path:"Market"},{label:"mind思维导图",path:"Mind"},{label:"应用广场",path:"AppStore"},{label:"会员中心",path:"Pay"},{label:"推广计划",path:"Share"}],v=[{label:"ChatGpt聊天",path:"/chat"},{label:"Dall-E2绘画",path:"/draw"},{label:"Midjourney绘画",path:"/midjourney"},{label:"mj公共预览页",path:"/market"},{label:"mind思维导图",path:"/mind"},{label:"应用广场",path:"/app-store"},{label:"不指定首页",path:""}],n=B({clientMenuList:[],clientHomePath:"",clientLogoPath:"",clientFavoIconPath:""}),C=b({clientHomePath:[{required:!1,trigger:"change",message:"请选择项目默认主页地址"}],clientMenuList:[{required:!1,trigger:"change",message:"请选择客户端开放的菜单"}],clientLogoPath:[{required:!1,trigger:"blur",message:"请填写您的网站LOGO图片链接"}],clientFavoIconPath:[{required:!1,trigger:"blur",message:"请填写您的网站favorit.ico网站logo地址"}]}),m=b();async function _(){const r=await g.queryConfig({keys:["clientHomePath","clientMenuList","clientLogoPath","clientFavoIconPath"]}),e=r.data;e.clientMenuList=e.clientMenuList?JSON.parse(e.clientMenuList):[],Object.assign(n,r.data)}function w(){var r;(r=m.value)==null||r.validate(async e=>{if(e){try{await g.setConfig({settings:j(n)}),L.success("变更配置信息成功")}catch{}_()}else L.error("请填写完整信息")})}function O(r,e){if(["clientMenuList"].includes(r)){if(!e)return[];if(e)return JSON.stringify(e)}else return e}function j(r){return Object.keys(r).map(e=>({configKey:e,configVal:O(e,r[e])}))}return R(()=>{_()}),(r,e)=>{const f=o("el-alert"),q=U,F=o("el-button"),I=o("el-checkbox"),S=o("el-checkbox-group"),s=o("el-form-item"),i=o("el-col"),c=o("el-row"),H=o("el-radio"),N=o("el-radio-group"),h=o("el-input"),E=o("el-form"),G=o("el-card");return u(),d("div",null,[l(q,null,{default:t(()=>[l(f,{closable:!1,"show-icon":"",title:"动态菜单配置说明",description:"如果不配置默认开启全部菜单、如果配置了开启菜单、则指定首页必须是开启的、否则会异常！",type:"success"})]),_:1}),l(G,{style:{margin:"20px"}},{header:t(()=>[V("div",z,[A,l(F,{class:"button",text:"",onClick:w},{default:t(()=>[p(" 保存设置 ")]),_:1})])]),default:t(()=>[l(E,{ref_key:"formRef",ref:m,rules:C.value,model:n,"label-width":"130px"},{default:t(()=>[l(c,null,{default:t(()=>[l(i,{xs:24,md:24,lg:24,xl:24},{default:t(()=>[l(s,{label:"侧边栏菜单",prop:"clientMenuList"},{default:t(()=>[l(S,{modelValue:n.clientMenuList,"onUpdate:modelValue":e[0]||(e[0]=a=>n.clientMenuList=a),size:"small"},{default:t(()=>[(u(),d(x,null,y(k,a=>l(I,{key:a.path,border:"",label:a.path},{default:t(()=>[p(P(a.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{xs:24,md:24,lg:24,xl:24},{default:t(()=>[l(s,{label:"设置指定首页",prop:"clientHomePath"},{default:t(()=>[l(N,{modelValue:n.clientHomePath,"onUpdate:modelValue":e[1]||(e[1]=a=>n.clientHomePath=a)},{default:t(()=>[(u(),d(x,null,y(v,a=>l(H,{key:a.path,size:"small",border:"",label:a.path},{default:t(()=>[p(P(a.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{xs:24,md:24,lg:24,xl:24},{default:t(()=>[l(s,{label:"用户端LOGO",prop:"clientLogoPath"},{default:t(()=>[l(h,{modelValue:n.clientLogoPath,"onUpdate:modelValue":e[2]||(e[2]=a=>n.clientLogoPath=a),placeholder:"请填写您要设置的网站LOGO图片链接",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{xs:24,md:24,lg:24,xl:24},{default:t(()=>[l(s,{label:"用户端ico",prop:"clientFavoIconPath"},{default:t(()=>[l(h,{modelValue:n.clientFavoIconPath,"onUpdate:modelValue":e[3]||(e[3]=a=>n.clientFavoIconPath=a),placeholder:"请填写您要设置的网站ico地址、格式为svg",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof M=="function"&&M(J);export{J as default};

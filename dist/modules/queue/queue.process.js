'use strict';var _0x87e61d=_0x20b8;(function(_0x489e1e,_0x4b9d7e){var _0xd2d666=_0x20b8,_0x36e1b6=_0x489e1e();while(!![]){try{var _0x2465da=parseInt(_0xd2d666(0x182))/0x1*(parseInt(_0xd2d666(0x154))/0x2)+-parseInt(_0xd2d666(0x16b))/0x3+-parseInt(_0xd2d666(0x161))/0x4+-parseInt(_0xd2d666(0x14f))/0x5*(-parseInt(_0xd2d666(0x152))/0x6)+parseInt(_0xd2d666(0x183))/0x7*(parseInt(_0xd2d666(0x16e))/0x8)+-parseInt(_0xd2d666(0x190))/0x9*(parseInt(_0xd2d666(0x16f))/0xa)+parseInt(_0xd2d666(0x188))/0xb*(parseInt(_0xd2d666(0x170))/0xc);if(_0x2465da===_0x4b9d7e)break;else _0x36e1b6['push'](_0x36e1b6['shift']());}catch(_0x5e7697){_0x36e1b6['push'](_0x36e1b6['shift']());}}}(_0xabeb,0x9e025));function _0x20b8(_0x25ca3e,_0x5f4ea8){var _0xabeb80=_0xabeb();return _0x20b8=function(_0x20b8e4,_0x263574){_0x20b8e4=_0x20b8e4-0x14f;var _0x62a76b=_0xabeb80[_0x20b8e4];return _0x62a76b;},_0x20b8(_0x25ca3e,_0x5f4ea8);}var __decorate=this&&this[_0x87e61d(0x150)]||function(_0x5af2bb,_0x6f8d5f,_0x3f1b30,_0x126a7d){var _0x58d006=_0x87e61d,_0x497aef=arguments[_0x58d006(0x15e)],_0x1c7100=_0x497aef<0x3?_0x6f8d5f:_0x126a7d===null?_0x126a7d=Object[_0x58d006(0x151)](_0x6f8d5f,_0x3f1b30):_0x126a7d,_0x5d5895;if(typeof Reflect==='object'&&typeof Reflect[_0x58d006(0x176)]===_0x58d006(0x18f))_0x1c7100=Reflect[_0x58d006(0x176)](_0x5af2bb,_0x6f8d5f,_0x3f1b30,_0x126a7d);else{for(var _0x2037e6=_0x5af2bb[_0x58d006(0x15e)]-0x1;_0x2037e6>=0x0;_0x2037e6--)if(_0x5d5895=_0x5af2bb[_0x2037e6])_0x1c7100=(_0x497aef<0x3?_0x5d5895(_0x1c7100):_0x497aef>0x3?_0x5d5895(_0x6f8d5f,_0x3f1b30,_0x1c7100):_0x5d5895(_0x6f8d5f,_0x3f1b30))||_0x1c7100;}return _0x497aef>0x3&&_0x1c7100&&Object[_0x58d006(0x189)](_0x6f8d5f,_0x3f1b30,_0x1c7100),_0x1c7100;},__metadata=this&&this['__metadata']||function(_0x4574a2,_0x339c41){var _0x1f3029=_0x87e61d;if(typeof Reflect===_0x1f3029(0x18b)&&typeof Reflect[_0x1f3029(0x17b)]==='function')return Reflect['metadata'](_0x4574a2,_0x339c41);},QueueProcessor_1;Object[_0x87e61d(0x189)](exports,_0x87e61d(0x18d),{'value':!![]}),exports[_0x87e61d(0x167)]=void 0x0;const bull_1=require(_0x87e61d(0x15c)),common_1=require(_0x87e61d(0x18a)),midjourney_service_1=require(_0x87e61d(0x17f));let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x2c8b48){var _0x151fc4=_0x87e61d;this[_0x151fc4(0x174)]=_0x2c8b48,this[_0x151fc4(0x16c)]=new common_1[(_0x151fc4(0x17e))](QueueProcessor_1[_0x151fc4(0x168)]);}async[_0x87e61d(0x177)](_0x2a2de0){var _0x2711fb=_0x87e61d;const _0x513d73=await this[_0x2711fb(0x174)][_0x2711fb(0x185)](_0x2a2de0[_0x2711fb(0x178)],_0x2a2de0['id']);return _0x513d73;}[_0x87e61d(0x153)](_0x33b469){}[_0x87e61d(0x175)](_0x242fe0){var _0x244c3d=_0x87e61d;console[_0x244c3d(0x155)](_0x244c3d(0x156),_0x242fe0);}[_0x87e61d(0x173)](_0x1410c8,_0x23028c){console['log']('队列任务的一个回调用于通知当前进度',_0x1410c8['id'],_0x23028c);}['onQueueCompleted'](_0x4a05f0,_0xd6af8f){}[_0x87e61d(0x15a)](_0x226225,_0x39f77){var _0x1e400d=_0x87e61d;common_1['Logger'][_0x1e400d(0x158)](_0x1e400d(0x160)+_0x39f77['message']+_0x1e400d(0x163)+_0x226225['id'],_0x1e400d(0x167)),this[_0x1e400d(0x174)]['drawFailed'](_0x226225[_0x1e400d(0x178)]);}['onQueuePaused'](){var _0x16b22b=_0x87e61d;console[_0x16b22b(0x155)](_0x16b22b(0x181));}[_0x87e61d(0x179)](){var _0x251ac6=_0x87e61d;console['log'](_0x251ac6(0x169));}[_0x87e61d(0x166)](_0x3c8d7c,_0x52482a){var _0x53eacb=_0x87e61d;common_1['Logger'][_0x53eacb(0x155)](_0x53eacb(0x172)+_0x3c8d7c[_0x53eacb(0x15e)]+_0x53eacb(0x157)+_0x52482a+_0x53eacb(0x16a),_0x53eacb(0x167));}['onQueueDrained'](){}};__decorate([(0x0,bull_1[_0x87e61d(0x180)])({'name':_0x87e61d(0x15b),'concurrency':process[_0x87e61d(0x15d)][_0x87e61d(0x165)]?+process[_0x87e61d(0x15d)][_0x87e61d(0x165)]:0x3}),__metadata(_0x87e61d(0x164),Function),__metadata(_0x87e61d(0x18c),[Object]),__metadata(_0x87e61d(0x15f),Promise)],QueueProcessor[_0x87e61d(0x162)],_0x87e61d(0x177),null),__decorate([(0x0,bull_1[_0x87e61d(0x17c)])(),__metadata(_0x87e61d(0x164),Function),__metadata(_0x87e61d(0x18c),[Object]),__metadata(_0x87e61d(0x15f),void 0x0)],QueueProcessor['prototype'],_0x87e61d(0x153),null),__decorate([(0x0,bull_1[_0x87e61d(0x17d)])(),__metadata('design:type',Function),__metadata(_0x87e61d(0x18c),[Error]),__metadata(_0x87e61d(0x15f),void 0x0)],QueueProcessor[_0x87e61d(0x162)],_0x87e61d(0x175),null),__decorate([(0x0,bull_1[_0x87e61d(0x17a)])(),__metadata('design:type',Function),__metadata(_0x87e61d(0x18c),[Object,Number]),__metadata(_0x87e61d(0x15f),void 0x0)],QueueProcessor[_0x87e61d(0x162)],'onQueueProgress',null),__decorate([(0x0,bull_1[_0x87e61d(0x184)])(),__metadata(_0x87e61d(0x164),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x87e61d(0x15f),void 0x0)],QueueProcessor[_0x87e61d(0x162)],_0x87e61d(0x171),null),__decorate([(0x0,bull_1['OnQueueFailed'])(),__metadata(_0x87e61d(0x164),Function),__metadata(_0x87e61d(0x18c),[Object,Error]),__metadata(_0x87e61d(0x15f),void 0x0)],QueueProcessor[_0x87e61d(0x162)],_0x87e61d(0x15a),null),__decorate([(0x0,bull_1[_0x87e61d(0x187)])(),__metadata(_0x87e61d(0x164),Function),__metadata(_0x87e61d(0x18c),[]),__metadata(_0x87e61d(0x15f),void 0x0)],QueueProcessor[_0x87e61d(0x162)],_0x87e61d(0x16d),null),__decorate([(0x0,bull_1['OnQueueResumed'])(),__metadata(_0x87e61d(0x164),Function),__metadata(_0x87e61d(0x18c),[]),__metadata(_0x87e61d(0x15f),void 0x0)],QueueProcessor[_0x87e61d(0x162)],_0x87e61d(0x179),null),__decorate([(0x0,bull_1[_0x87e61d(0x18e)])(),__metadata(_0x87e61d(0x164),Function),__metadata(_0x87e61d(0x18c),[Array,String]),__metadata(_0x87e61d(0x15f),void 0x0)],QueueProcessor['prototype'],_0x87e61d(0x166),null),__decorate([(0x0,bull_1['OnQueueDrained'])(),__metadata(_0x87e61d(0x164),Function),__metadata(_0x87e61d(0x18c),[]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x87e61d(0x162)],_0x87e61d(0x191),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0x87e61d(0x159)])('MJDRAW'),__metadata(_0x87e61d(0x18c),[midjourney_service_1[_0x87e61d(0x186)]])],QueueProcessor),exports['QueueProcessor']=QueueProcessor;function _0xabeb(){var _0x3b40a6=['logger','onQueuePaused','4466920FKRyWK','10WFQPdh','2607624rvYYIZ','onQueueCompleted','Queue\x20cleaned:\x20','onQueueProgress','midjourneyService','onQueueError','decorate','handleJob','data','onQueueResumed','OnQueueProgress','metadata','OnQueueActive','OnQueueError','Logger','../midjourney/midjourney.service','Process','队列暂停的时候调用','1541BPPqCZ','14HikGSK','OnQueueCompleted','draw','MidjourneyService','OnQueuePaused','11EYudoD','defineProperty','@nestjs/common','object','design:paramtypes','__esModule','OnQueueCleaned','function','9951777Xfmzxv','onQueueDrained','1060rGCxaj','__decorate','getOwnPropertyDescriptor','9678ZkoNMG','onQueueActive','1678vkTYZD','log','队列发生错误','\x20jobs\x20of\x20type\x20','error','Processor','onQueueFailed','mjDraw','@nestjs/bull','env','length','design:returntype','Queue\x20failed:\x20','1933916TWqjyu','prototype',':\x20绘画失败\x20','design:type','CONCURRENCY','onQueueCleaned','QueueProcessor','name','队列恢复的时候调用','\x20were\x20cleaned.','2197350pfMmqg'];_0xabeb=function(){return _0x3b40a6;};return _0xabeb();}
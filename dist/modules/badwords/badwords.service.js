'use strict';const _0x1a7620=_0x41cd;function _0x41cd(_0x409504,_0x5175c5){const _0x45e686=_0x45e6();return _0x41cd=function(_0x41cdd5,_0x4b87d1){_0x41cdd5=_0x41cdd5-0x67;let _0x54f37c=_0x45e686[_0x41cdd5];return _0x54f37c;},_0x41cd(_0x409504,_0x5175c5);}function _0x45e6(){const _0x16fb90=['HttpException','__param','save','InjectRepository','decorate','defineProperty','data','87201xUOweG','updateBadWords','您的言语中','application/json','queryBadWords','敏感词已存在,请检查您的提交信息','BAD_REQUEST','metadata','@nestjs/common','5629584HdsiAw','includes','百度文本检测合规','2709388cmiojr','affected','GlobalConfigService','2VyTdAt','getOwnPropertyDescriptor','post','loadBadWords','1454MwDvYz','213102PUnMRU','addBadWord','length','添加敏感词成功','更新敏感词成功','baiduCheckBadWords','findOne','更新敏感词失败','word','map','1173856adQBtl','msg','154FqJtiH','delBadWords','typeorm','update','敏感词不存在,请检查您的提交信息','__esModule','HttpStatus','design:paramtypes','findAndCount','BadwordsService','删除敏感词成功','9kLcqcF','删除敏感词失败','badWordsEntity','敏感词已经存在了、请勿重复添加','970ehwuHT','find','badWords','Like','checkBadWords','2799235vITwwQ','function','onModuleInit','、请注意您的发言！','application/x-www-form-urlencoded','__decorate','axios','delete','https://aip.baidubce.com/rest/2.0/solution/v1/text_censor/v2/user_defined?access_token='];_0x45e6=function(){return _0x16fb90;};return _0x45e6();}(function(_0x115caa,_0x453243){const _0x1f3be5=_0x41cd,_0x47bf22=_0x115caa();while(!![]){try{const _0x3db398=-parseInt(_0x1f3be5(0xa6))/0x1*(-parseInt(_0x1f3be5(0xa2))/0x2)+-parseInt(_0x1f3be5(0x7a))/0x3*(parseInt(_0x1f3be5(0x6d))/0x4)+parseInt(_0x1f3be5(0x83))/0x5+-parseInt(_0x1f3be5(0xa7))/0x6*(-parseInt(_0x1f3be5(0x6f))/0x7)+parseInt(_0x1f3be5(0x9c))/0x8+parseInt(_0x1f3be5(0x93))/0x9*(-parseInt(_0x1f3be5(0x7e))/0xa)+parseInt(_0x1f3be5(0x9f))/0xb;if(_0x3db398===_0x453243)break;else _0x47bf22['push'](_0x47bf22['shift']());}catch(_0x5e8e01){_0x47bf22['push'](_0x47bf22['shift']());}}}(_0x45e6,0x73588));var __decorate=this&&this[_0x1a7620(0x88)]||function(_0x5e31e9,_0x14c58e,_0x3ce656,_0x37c530){const _0x440fa3=_0x1a7620;var _0x3d3bc2=arguments['length'],_0x3046fc=_0x3d3bc2<0x3?_0x14c58e:_0x37c530===null?_0x37c530=Object[_0x440fa3(0xa3)](_0x14c58e,_0x3ce656):_0x37c530,_0x4b0460;if(typeof Reflect==='object'&&typeof Reflect[_0x440fa3(0x90)]===_0x440fa3(0x84))_0x3046fc=Reflect[_0x440fa3(0x90)](_0x5e31e9,_0x14c58e,_0x3ce656,_0x37c530);else{for(var _0x530615=_0x5e31e9['length']-0x1;_0x530615>=0x0;_0x530615--)if(_0x4b0460=_0x5e31e9[_0x530615])_0x3046fc=(_0x3d3bc2<0x3?_0x4b0460(_0x3046fc):_0x3d3bc2>0x3?_0x4b0460(_0x14c58e,_0x3ce656,_0x3046fc):_0x4b0460(_0x14c58e,_0x3ce656))||_0x3046fc;}return _0x3d3bc2>0x3&&_0x3046fc&&Object['defineProperty'](_0x14c58e,_0x3ce656,_0x3046fc),_0x3046fc;},__metadata=this&&this['__metadata']||function(_0x5a3d4e,_0x5be63c){const _0x34a82f=_0x1a7620;if(typeof Reflect==='object'&&typeof Reflect[_0x34a82f(0x9a)]===_0x34a82f(0x84))return Reflect[_0x34a82f(0x9a)](_0x5a3d4e,_0x5be63c);},__param=this&&this[_0x1a7620(0x8d)]||function(_0xfa8331,_0x428882){return function(_0x57e738,_0x76de9e){_0x428882(_0x57e738,_0x76de9e,_0xfa8331);};};Object[_0x1a7620(0x91)](exports,_0x1a7620(0x74),{'value':!![]}),exports[_0x1a7620(0x78)]=void 0x0;const globalConfig_service_1=require('./../globalConfig/globalConfig.service'),common_1=require(_0x1a7620(0x9b)),badwords_entity_1=require('./badwords.entity'),typeorm_1=require(_0x1a7620(0x71)),typeorm_2=require('@nestjs/typeorm'),axios_1=require(_0x1a7620(0x89));let BadwordsService=class BadwordsService{constructor(_0x1f800a,_0x549763){const _0x2a4295=_0x1a7620;this[_0x2a4295(0x7c)]=_0x1f800a,this['globalConfigService']=_0x549763,this[_0x2a4295(0x80)]=[];}async[_0x1a7620(0x85)](){const _0x1720e0=_0x1a7620;this[_0x1720e0(0xa5)]();}async[_0x1a7620(0x82)](_0x19f2b9){const _0x5b7818=_0x1a7620,_0x7db4dd=await this['globalConfigService']['getConfigs'](['baiduTextAccessToken']);if(_0x7db4dd){const {success:_0x2af51d,msg:_0x4ae7a3}=await this[_0x5b7818(0x68)](_0x19f2b9,_0x7db4dd);if(!_0x2af51d)throw new common_1[(_0x5b7818(0x8c))](_0x4ae7a3,common_1[_0x5b7818(0x75)][_0x5b7818(0x99)]);}const _0x5e6a30=this[_0x5b7818(0x80)]['some'](_0x5f5138=>{const _0x594d43=_0x5b7818;if(_0x19f2b9[_0x594d43(0x9d)](_0x5f5138))return!![];});return _0x5e6a30;}async[_0x1a7620(0x68)](_0x41d06e,_0x10b43e){const _0x3a48bc=_0x1a7620,_0x5cb337=_0x3a48bc(0x8b)+_0x10b43e+'}',_0x4118ca={'Content-Type':_0x3a48bc(0x87),'Accept':_0x3a48bc(0x96)},_0x3ab5f2=await axios_1['default'][_0x3a48bc(0xa4)](_0x5cb337,{'text':_0x41d06e},{'headers':_0x4118ca}),{conclusion:_0x298c24,error_code:_0x1cb823,error_msg:_0x10f643,conclusionType:_0x1b930c,data:_0x47b46e}=_0x3ab5f2[_0x3a48bc(0x92)];_0x1cb823&&console['log']('百度文本检测出现错误、请查看配置信息:\x20',_0x10f643);if(_0x1b930c===0x1)return{'success':!![],'msg':_0x3a48bc(0x9e)};else{let _0x384731='';return _0x47b46e[_0x3a48bc(0xa9)]&&(_0x384731=_0x47b46e[0x0][_0x3a48bc(0x6e)]),{'success':![],'msg':_0x3a48bc(0x95)+_0x384731+_0x3a48bc(0x86)};}}async[_0x1a7620(0xa5)](){const _0x27e35a=_0x1a7620,_0x1837d7=await this[_0x27e35a(0x7c)][_0x27e35a(0x7f)]({'where':{'status':0x1},'select':[_0x27e35a(0x6b)]});this[_0x27e35a(0x80)]=_0x1837d7[_0x27e35a(0x6c)](_0x1873f6=>_0x1873f6[_0x27e35a(0x6b)]);}async[_0x1a7620(0x97)](_0x3c208a){const _0x2098f4=_0x1a7620,{page:page=0x1,size:size=0x1f4,word:_0x2eb48e,status:_0x332c2d}=_0x3c208a,_0x54244f={};[0x0,0x1,'0','1'][_0x2098f4(0x9d)](_0x332c2d)&&(_0x54244f['status']=_0x332c2d),_0x2eb48e&&(_0x54244f[_0x2098f4(0x6b)]=(0x0,typeorm_1[_0x2098f4(0x81)])('%'+_0x2eb48e+'%'));const [_0x2569e4,_0x453845]=await this[_0x2098f4(0x7c)][_0x2098f4(0x77)]({'where':_0x54244f,'skip':(page-0x1)*size,'take':size,'order':{'id':'ASC'}});return{'rows':_0x2569e4,'count':_0x453845};}async[_0x1a7620(0x70)](_0x3977f3){const _0x55f025=_0x1a7620,_0x4d304d=await this[_0x55f025(0x7c)][_0x55f025(0x69)]({'where':{'id':_0x3977f3['id']}});if(!_0x4d304d)throw new common_1[(_0x55f025(0x8c))](_0x55f025(0x73),common_1[_0x55f025(0x75)][_0x55f025(0x99)]);const _0x5647bf=await this[_0x55f025(0x7c)][_0x55f025(0x8a)]({'id':_0x3977f3['id']});if(_0x5647bf[_0x55f025(0xa0)]>0x0)return await this[_0x55f025(0xa5)](),_0x55f025(0x79);else throw new common_1[(_0x55f025(0x8c))](_0x55f025(0x7b),common_1['HttpStatus']['BAD_REQUEST']);}async[_0x1a7620(0x94)](_0x1651b9){const _0x36a4c8=_0x1a7620,{id:_0x47a186,word:_0x5ec441,status:_0x4a514c}=_0x1651b9,_0x1443e2=await this[_0x36a4c8(0x7c)]['findOne']({'where':{'word':_0x5ec441}});if(_0x1443e2)throw new common_1[(_0x36a4c8(0x8c))](_0x36a4c8(0x7d),common_1[_0x36a4c8(0x75)]['BAD_REQUEST']);const _0x458645=await this[_0x36a4c8(0x7c)][_0x36a4c8(0x72)]({'id':_0x47a186},{'word':_0x5ec441,'status':_0x4a514c});if(_0x458645[_0x36a4c8(0xa0)]>0x0)return await this[_0x36a4c8(0xa5)](),_0x36a4c8(0x67);else throw new common_1[(_0x36a4c8(0x8c))](_0x36a4c8(0x6a),common_1['HttpStatus'][_0x36a4c8(0x99)]);}async[_0x1a7620(0xa8)](_0x16131f){const _0x409836=_0x1a7620,{word:_0x1c579c}=_0x16131f,_0x4a303f=await this[_0x409836(0x7c)][_0x409836(0x69)]({'where':{'word':_0x1c579c}});if(_0x4a303f)throw new common_1[(_0x409836(0x8c))](_0x409836(0x98),common_1[_0x409836(0x75)]['BAD_REQUEST']);return await this['badWordsEntity'][_0x409836(0x8e)]({'word':_0x1c579c}),await this['loadBadWords'](),_0x409836(0xaa);}};BadwordsService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_2[_0x1a7620(0x8f)])(badwords_entity_1['BadWordsEntity'])),__metadata(_0x1a7620(0x76),[typeorm_1['Repository'],globalConfig_service_1[_0x1a7620(0xa1)]])],BadwordsService),exports['BadwordsService']=BadwordsService;
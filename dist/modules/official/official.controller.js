'use strict';const _0x408db2=_0x49ef;function _0x49ef(_0x3425c9,_0x1825a7){const _0xc2a931=_0xc2a9();return _0x49ef=function(_0x49ef25,_0x3c593e){_0x49ef25=_0x49ef25-0x168;let _0x519aaf=_0xc2a931[_0x49ef25];return _0x519aaf;},_0x49ef(_0x3425c9,_0x1825a7);}(function(_0x365c68,_0x531146){const _0x53e495=_0x49ef,_0x2a42b4=_0x365c68();while(!![]){try{const _0xf04cd5=-parseInt(_0x53e495(0x16d))/0x1*(-parseInt(_0x53e495(0x1bd))/0x2)+-parseInt(_0x53e495(0x16b))/0x3*(parseInt(_0x53e495(0x190))/0x4)+-parseInt(_0x53e495(0x17a))/0x5*(-parseInt(_0x53e495(0x1c0))/0x6)+parseInt(_0x53e495(0x1a9))/0x7*(parseInt(_0x53e495(0x1ad))/0x8)+-parseInt(_0x53e495(0x1a0))/0x9*(parseInt(_0x53e495(0x169))/0xa)+parseInt(_0x53e495(0x193))/0xb+parseInt(_0x53e495(0x1b5))/0xc*(parseInt(_0x53e495(0x189))/0xd);if(_0xf04cd5===_0x531146)break;else _0x2a42b4['push'](_0x2a42b4['shift']());}catch(_0x57f4ab){_0x2a42b4['push'](_0x2a42b4['shift']());}}}(_0xc2a9,0xbfda2));function _0xc2a9(){const _0xa92bea=['10cRAiHV','status','289293EWPWaR','url','53SJYDWK','echostr','扫码绑定轮询查询','getOwnPropertyDescriptor','event','design:returntype','Post','sceneStr:\x20','genXmlMsgByConfig','OfficialController','object','./dto/getQrCode.dto','env','97790bTGOOa','Get','ApiTags','eventkey','bindWxBySceneStr','GetQrCodeDto','getJsapiTicket','fromusername','officialService','获取登录二维码sceneStr','defineProperty','decorate','design:type','UseGuards','获取绑定二维码的sceneStr','673803yFSruc','genXmlMsg','扫码登录轮询查询','getQRSceneStr','prototype','VIEW','__esModule','44fHkIxe','official','unsubscribe','1371238LEJfxY','./official.service','Query','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','log','__param','officialSubscribeText','公众号通知接口GET','获取登录跳转地址','__metadata','includes','officialScanLoginText','getQRSceneStrByBind','7414695nEhoKE','JwtAuthGuard','split','./dto/getQrSceneStr.dto','loginByCode','ISDEV','@nestjs/common','design:paramtypes','ApiOperation','7NOPpHa','getQRCode','nonce','Res','10459832RHlqiC','officialBindAccountText','metadata','../../common/auth/jwtAuth.guard','xml:\x20','timestamp','code','TRUE','120xPsffa','SCAN','aotoPlay','__decorate','scan','Req','length','Controller','10194yzDujf','success','verify','138FQAAUD','notify','content','function','获取注册配置','msgtype','loginBySceneStr','getQRCodeTicket','send','Body','sceneStr','公众号静默登录','notifyPost','scanBindWx','getRedirectUrl','公众号通知接口POST'];_0xc2a9=function(){return _0xa92bea;};return _0xc2a9();}var __decorate=this&&this[_0x408db2(0x1b8)]||function(_0x14539f,_0x261968,_0x314a41,_0x306703){const _0x284421=_0x408db2;var _0x1d5ce3=arguments['length'],_0x3686a2=_0x1d5ce3<0x3?_0x261968:_0x306703===null?_0x306703=Object[_0x284421(0x170)](_0x261968,_0x314a41):_0x306703,_0x714260;if(typeof Reflect===_0x284421(0x177)&&typeof Reflect[_0x284421(0x185)]===_0x284421(0x1c3))_0x3686a2=Reflect[_0x284421(0x185)](_0x14539f,_0x261968,_0x314a41,_0x306703);else{for(var _0x3f659b=_0x14539f[_0x284421(0x1bb)]-0x1;_0x3f659b>=0x0;_0x3f659b--)if(_0x714260=_0x14539f[_0x3f659b])_0x3686a2=(_0x1d5ce3<0x3?_0x714260(_0x3686a2):_0x1d5ce3>0x3?_0x714260(_0x261968,_0x314a41,_0x3686a2):_0x714260(_0x261968,_0x314a41))||_0x3686a2;}return _0x1d5ce3>0x3&&_0x3686a2&&Object[_0x284421(0x184)](_0x261968,_0x314a41,_0x3686a2),_0x3686a2;},__metadata=this&&this[_0x408db2(0x19c)]||function(_0x353fee,_0x1f8b00){const _0x192ab9=_0x408db2;if(typeof Reflect===_0x192ab9(0x177)&&typeof Reflect[_0x192ab9(0x1af)]==='function')return Reflect['metadata'](_0x353fee,_0x1f8b00);},__param=this&&this[_0x408db2(0x198)]||function(_0x5c6c4e,_0x39d0c9){return function(_0x3a9348,_0x387309){_0x39d0c9(_0x3a9348,_0x387309,_0x5c6c4e);};};Object[_0x408db2(0x184)](exports,_0x408db2(0x18f),{'value':!![]}),exports[_0x408db2(0x176)]=void 0x0;const common_1=require(_0x408db2(0x1a6)),swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x408db2(0x1b0)),official_service_1=require(_0x408db2(0x194)),getQrCode_dto_1=require(_0x408db2(0x178)),getQrSceneStr_dto_1=require(_0x408db2(0x1a3));let OfficialController=class OfficialController{constructor(_0xe88ff5){const _0x8fa0f8=_0x408db2;this[_0x8fa0f8(0x182)]=_0xe88ff5;}async[_0x408db2(0x1c1)](_0x17856f,_0x8f4096,_0x381c14){const _0x123efc=_0x408db2;console[_0x123efc(0x197)]('get\x20通知>>>',_0x8f4096,_0x381c14);const _0x4627f7=await this[_0x123efc(0x182)][_0x123efc(0x1bf)](_0x8f4096['signature'],_0x8f4096[_0x123efc(0x1ab)],_0x8f4096[_0x123efc(0x1b2)]);return _0x4627f7?_0x8f4096[_0x123efc(0x16e)]:'';}async[_0x408db2(0x1cc)](_0x41ec67,_0x1e2327,_0x45b229,_0xbdc5a4){const _0x5cb8a6=_0x408db2,{xml:_0x2cb359}=_0x45b229;console[_0x5cb8a6(0x197)](_0x5cb8a6(0x1b1),_0x2cb359);if(_0x2cb359[_0x5cb8a6(0x1c5)][0x0]=='event'){if(_0x2cb359['event'][0x0]==_0x5cb8a6(0x18e)||_0x2cb359['event'][0x0]=='CLICK')return _0xbdc5a4['status'](0xc8)['send']('');if(_0x2cb359[_0x5cb8a6(0x171)][0x0]==_0x5cb8a6(0x1b6)){console[_0x5cb8a6(0x197)]('扫码');const _0x3e0b76=_0x2cb359[_0x5cb8a6(0x17d)][0x0];if(_0x3e0b76[_0x5cb8a6(0x19d)]('/')){this[_0x5cb8a6(0x182)][_0x5cb8a6(0x1cd)](_0x2cb359[_0x5cb8a6(0x181)][0x0],_0x3e0b76);const _0x373c2c=await this[_0x5cb8a6(0x182)][_0x5cb8a6(0x175)](_0x2cb359,_0x5cb8a6(0x1ae));return _0xbdc5a4[_0x5cb8a6(0x16a)](0xc8)['send'](_0x373c2c);}this['officialService'][_0x5cb8a6(0x1b9)](_0x2cb359['fromusername'][0x0],_0x3e0b76);const _0x5cc95e=await this[_0x5cb8a6(0x182)][_0x5cb8a6(0x175)](_0x2cb359,_0x5cb8a6(0x19e));return _0xbdc5a4[_0x5cb8a6(0x16a)](0xc8)[_0x5cb8a6(0x1c8)](_0x5cc95e);}if(_0x2cb359[_0x5cb8a6(0x171)][0x0]=='subscribe'){console[_0x5cb8a6(0x197)]('订阅',_0x2cb359[_0x5cb8a6(0x17d)][0x0]);const _0x356e2e=_0x2cb359[_0x5cb8a6(0x17d)][0x0][_0x5cb8a6(0x1a2)]('qrscene_')[0x1];console[_0x5cb8a6(0x197)](_0x5cb8a6(0x174),_0x356e2e);if(!_0x356e2e){const _0x1269d0=await this['officialService']['genXmlMsgByConfig'](_0x2cb359,_0x5cb8a6(0x199));return _0xbdc5a4['status'](0xc8)['send'](_0x1269d0);}if(_0x356e2e[_0x5cb8a6(0x19d)]('/')){this[_0x5cb8a6(0x182)]['scanBindWx'](_0x2cb359[_0x5cb8a6(0x181)][0x0],_0x356e2e);const _0x35d8c9=await this[_0x5cb8a6(0x182)]['genXmlMsgByConfig'](_0x2cb359,_0x5cb8a6(0x1ae));return _0xbdc5a4[_0x5cb8a6(0x16a)](0xc8)[_0x5cb8a6(0x1c8)](_0x35d8c9);}this[_0x5cb8a6(0x182)][_0x5cb8a6(0x1b9)](_0x2cb359['fromusername'][0x0],_0x356e2e);const _0x4d1a45=await this[_0x5cb8a6(0x182)][_0x5cb8a6(0x175)](_0x2cb359,'officialSubscribeText');return _0xbdc5a4[_0x5cb8a6(0x16a)](0xc8)[_0x5cb8a6(0x1c8)](_0x4d1a45);}if(_0x2cb359['event'][0x0]==_0x5cb8a6(0x192))return _0xbdc5a4['status'](0xc8)['send']('');}if(_0x2cb359[_0x5cb8a6(0x1c5)][0x0]=='text'){console[_0x5cb8a6(0x197)]('客户端发送了文字消息');const _0x524797=await this[_0x5cb8a6(0x182)][_0x5cb8a6(0x1b7)](_0x2cb359[_0x5cb8a6(0x1c2)][0x0]),_0x171185=await this[_0x5cb8a6(0x182)][_0x5cb8a6(0x18a)](_0x2cb359,_0x524797);return _0xbdc5a4[_0x5cb8a6(0x16a)](0xc8)[_0x5cb8a6(0x1c8)](_0x171185);}return _0x5cb8a6(0x1be);}async[_0x408db2(0x18c)](_0xd6ef22){const _0x6b231b=_0x408db2;return this[_0x6b231b(0x182)]['getQRSceneStr'](_0xd6ef22);}async['getQRSceneStrByBind'](_0x32b7e0){const _0x247802=_0x408db2;return this[_0x247802(0x182)]['getQRSceneStrByBind'](_0x32b7e0);}async[_0x408db2(0x1aa)](_0x70ae27){const _0x1a6c5c=_0x408db2;if(process[_0x1a6c5c(0x179)][_0x1a6c5c(0x1a5)]===_0x1a6c5c(0x1b4))return'';const _0x5d4e37=await this[_0x1a6c5c(0x182)][_0x1a6c5c(0x1c7)](_0x70ae27[_0x1a6c5c(0x1ca)]);return _0x1a6c5c(0x196)+encodeURIComponent(_0x5d4e37);}async[_0x408db2(0x1c6)](_0x3a3777,_0x20ca42){const _0x3efaf8=_0x408db2;return this[_0x3efaf8(0x182)][_0x3efaf8(0x1c6)](_0x3a3777,_0x20ca42[_0x3efaf8(0x1ca)]);}async['bindWxBySceneStr'](_0x4baac1,_0x294066){return this['officialService']['bindWxBySceneStr'](_0x4baac1,_0x294066['sceneStr']);}async[_0x408db2(0x1ce)](_0x43173f){const _0x1ee389=_0x408db2;return this[_0x1ee389(0x182)][_0x1ee389(0x1ce)](_0x43173f[_0x1ee389(0x16c)]);}async[_0x408db2(0x180)](_0x44efe6){const _0x24998b=_0x408db2;return this['officialService']['getJsapiTicket'](_0x44efe6[_0x24998b(0x16c)]);}async[_0x408db2(0x1a4)](_0x37f708,_0x12b315){const _0xc7840=_0x408db2;return this[_0xc7840(0x182)][_0xc7840(0x1a4)](_0x37f708,_0x12b315[_0xc7840(0x1b3)]);}};__decorate([(0x0,common_1[_0x408db2(0x17b)])('notify'),(0x0,swagger_1[_0x408db2(0x1a8)])({'summary':_0x408db2(0x19a)}),__param(0x0,(0x0,common_1[_0x408db2(0x1ba)])()),__param(0x1,(0x0,common_1[_0x408db2(0x195)])()),__param(0x2,(0x0,common_1[_0x408db2(0x1c9)])()),__metadata('design:type',Function),__metadata(_0x408db2(0x1a7),[Object,Object,Object]),__metadata(_0x408db2(0x172),Promise)],OfficialController[_0x408db2(0x18d)],_0x408db2(0x1c1),null),__decorate([(0x0,common_1['Post'])('notify'),(0x0,swagger_1[_0x408db2(0x1a8)])({'summary':_0x408db2(0x168)}),__param(0x0,(0x0,common_1[_0x408db2(0x1ba)])()),__param(0x1,(0x0,common_1[_0x408db2(0x195)])()),__param(0x2,(0x0,common_1[_0x408db2(0x1c9)])()),__param(0x3,(0x0,common_1[_0x408db2(0x1ac)])()),__metadata(_0x408db2(0x186),Function),__metadata(_0x408db2(0x1a7),[Object,Object,Object,Object]),__metadata(_0x408db2(0x172),Promise)],OfficialController[_0x408db2(0x18d)],_0x408db2(0x1cc),null),__decorate([(0x0,common_1['Post'])(_0x408db2(0x18c)),(0x0,swagger_1[_0x408db2(0x1a8)])({'summary':_0x408db2(0x183)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x408db2(0x186),Function),__metadata('design:paramtypes',[getQrSceneStr_dto_1['GetQrSceneStrDto']]),__metadata(_0x408db2(0x172),Promise)],OfficialController[_0x408db2(0x18d)],'getQRSceneStr',null),__decorate([(0x0,common_1[_0x408db2(0x173)])('getQRSceneStrByBind'),(0x0,swagger_1[_0x408db2(0x1a8)])({'summary':_0x408db2(0x188)}),(0x0,common_1[_0x408db2(0x187)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1[_0x408db2(0x1ba)])()),__metadata(_0x408db2(0x186),Function),__metadata(_0x408db2(0x1a7),[Object]),__metadata(_0x408db2(0x172),Promise)],OfficialController[_0x408db2(0x18d)],_0x408db2(0x19f),null),__decorate([(0x0,common_1[_0x408db2(0x17b)])(_0x408db2(0x1aa)),(0x0,swagger_1[_0x408db2(0x1a8)])({'summary':'获取二维码'}),__param(0x0,(0x0,common_1[_0x408db2(0x195)])()),__metadata(_0x408db2(0x186),Function),__metadata(_0x408db2(0x1a7),[getQrCode_dto_1[_0x408db2(0x17f)]]),__metadata('design:returntype',Promise)],OfficialController[_0x408db2(0x18d)],_0x408db2(0x1aa),null),__decorate([(0x0,common_1[_0x408db2(0x173)])(_0x408db2(0x1c6)),(0x0,swagger_1[_0x408db2(0x1a8)])({'summary':_0x408db2(0x18b)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x408db2(0x1c9)])()),__metadata(_0x408db2(0x186),Function),__metadata(_0x408db2(0x1a7),[Object,getQrCode_dto_1[_0x408db2(0x17f)]]),__metadata('design:returntype',Promise)],OfficialController[_0x408db2(0x18d)],_0x408db2(0x1c6),null),__decorate([(0x0,common_1[_0x408db2(0x173)])(_0x408db2(0x17e)),(0x0,swagger_1['ApiOperation'])({'summary':_0x408db2(0x16f)}),(0x0,common_1[_0x408db2(0x187)])(jwtAuth_guard_1[_0x408db2(0x1a1)]),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x408db2(0x1c9)])()),__metadata(_0x408db2(0x186),Function),__metadata(_0x408db2(0x1a7),[Object,getQrCode_dto_1[_0x408db2(0x17f)]]),__metadata('design:returntype',Promise)],OfficialController[_0x408db2(0x18d)],_0x408db2(0x17e),null),__decorate([(0x0,common_1['Post'])(_0x408db2(0x1ce)),(0x0,swagger_1['ApiOperation'])({'summary':_0x408db2(0x19b)}),__param(0x0,(0x0,common_1[_0x408db2(0x1c9)])()),__metadata(_0x408db2(0x186),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x408db2(0x172),Promise)],OfficialController['prototype'],_0x408db2(0x1ce),null),__decorate([(0x0,common_1[_0x408db2(0x173)])(_0x408db2(0x180)),(0x0,swagger_1['ApiOperation'])({'summary':_0x408db2(0x1c4)}),__param(0x0,(0x0,common_1[_0x408db2(0x1c9)])()),__metadata(_0x408db2(0x186),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],OfficialController['prototype'],_0x408db2(0x180),null),__decorate([(0x0,common_1[_0x408db2(0x173)])(_0x408db2(0x1a4)),(0x0,swagger_1['ApiOperation'])({'summary':_0x408db2(0x1cb)}),__param(0x0,(0x0,common_1[_0x408db2(0x1ba)])()),__param(0x1,(0x0,common_1[_0x408db2(0x1c9)])()),__metadata('design:type',Function),__metadata(_0x408db2(0x1a7),[Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x408db2(0x18d)],_0x408db2(0x1a4),null),OfficialController=__decorate([(0x0,swagger_1[_0x408db2(0x17c)])(_0x408db2(0x191)),(0x0,common_1[_0x408db2(0x1bc)])('official'),__metadata('design:paramtypes',[official_service_1['OfficialService']])],OfficialController),exports[_0x408db2(0x176)]=OfficialController;
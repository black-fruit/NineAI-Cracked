'use strict';const _0x3dfd47=_0x1b85;(function(_0xd32e0,_0x2522e6){const _0x2e3ce0=_0x1b85,_0x2ed511=_0xd32e0();while(!![]){try{const _0x547f6c=-parseInt(_0x2e3ce0(0xdc))/0x1*(parseInt(_0x2e3ce0(0xe0))/0x2)+parseInt(_0x2e3ce0(0xbc))/0x3*(-parseInt(_0x2e3ce0(0xc3))/0x4)+parseInt(_0x2e3ce0(0xe4))/0x5*(-parseInt(_0x2e3ce0(0xd8))/0x6)+-parseInt(_0x2e3ce0(0xd9))/0x7+-parseInt(_0x2e3ce0(0xb9))/0x8+-parseInt(_0x2e3ce0(0xdf))/0x9*(-parseInt(_0x2e3ce0(0xce))/0xa)+parseInt(_0x2e3ce0(0xd6))/0xb;if(_0x547f6c===_0x2522e6)break;else _0x2ed511['push'](_0x2ed511['shift']());}catch(_0x693233){_0x2ed511['push'](_0x2ed511['shift']());}}}(_0x57e6,0xdf582));var __decorate=this&&this['__decorate']||function(_0x4c9ea6,_0x16d9d5,_0x42bd11,_0x2d6e8e){const _0x4a128e=_0x1b85;var _0x4347d2=arguments[_0x4a128e(0xd2)],_0x336863=_0x4347d2<0x3?_0x16d9d5:_0x2d6e8e===null?_0x2d6e8e=Object[_0x4a128e(0xd5)](_0x16d9d5,_0x42bd11):_0x2d6e8e,_0x4579e7;if(typeof Reflect===_0x4a128e(0xcd)&&typeof Reflect[_0x4a128e(0xc1)]===_0x4a128e(0xca))_0x336863=Reflect[_0x4a128e(0xc1)](_0x4c9ea6,_0x16d9d5,_0x42bd11,_0x2d6e8e);else{for(var _0x338909=_0x4c9ea6[_0x4a128e(0xd2)]-0x1;_0x338909>=0x0;_0x338909--)if(_0x4579e7=_0x4c9ea6[_0x338909])_0x336863=(_0x4347d2<0x3?_0x4579e7(_0x336863):_0x4347d2>0x3?_0x4579e7(_0x16d9d5,_0x42bd11,_0x336863):_0x4579e7(_0x16d9d5,_0x42bd11))||_0x336863;}return _0x4347d2>0x3&&_0x336863&&Object[_0x4a128e(0xd7)](_0x16d9d5,_0x42bd11,_0x336863),_0x336863;},__metadata=this&&this[_0x3dfd47(0xde)]||function(_0x17bcc1,_0x56535e){const _0x44e2ae=_0x3dfd47;if(typeof Reflect===_0x44e2ae(0xcd)&&typeof Reflect[_0x44e2ae(0xc0)]===_0x44e2ae(0xca))return Reflect['metadata'](_0x17bcc1,_0x56535e);},__param=this&&this[_0x3dfd47(0xc9)]||function(_0x78cceb,_0x28c4db){return function(_0x475f49,_0x3202f7){_0x28c4db(_0x475f49,_0x3202f7,_0x78cceb);};};Object[_0x3dfd47(0xd7)](exports,_0x3dfd47(0xba),{'value':!![]}),exports[_0x3dfd47(0xc5)]=void 0x0;function _0x1b85(_0x46daa6,_0x4a3f2a){const _0x57e6cb=_0x57e6();return _0x1b85=function(_0x1b8530,_0x2bf663){_0x1b8530=_0x1b8530-0xb9;let _0x624d51=_0x57e6cb[_0x1b8530];return _0x624d51;},_0x1b85(_0x46daa6,_0x4a3f2a);}const common_1=require(_0x3dfd47(0xbe));let RedisCacheService=class RedisCacheService{constructor(_0x170d06){this['redisClient']=_0x170d06;}async[_0x3dfd47(0xbd)](){}[_0x3dfd47(0xd3)](){const _0x32563b=_0x3dfd47;return this[_0x32563b(0xe5)][_0x32563b(0xbb)](_0x32563b(0xcb),0x6f),0x1;}async[_0x3dfd47(0xe2)](_0x5f2af3){const _0x51f32b=_0x3dfd47,{key:_0x3f35bf}=_0x5f2af3,_0x560a53=await this[_0x51f32b(0xe5)][_0x51f32b(0xe2)](_0x3f35bf);return await this[_0x51f32b(0xe5)]['get'](_0x3f35bf);}async['set'](_0x476f5d,_0x35abcf){const _0x3d03ba=_0x3dfd47;try{const {key:_0x562dc9,val:_0x5b7759}=_0x476f5d;await this[_0x3d03ba(0xe5)][_0x3d03ba(0xbb)](_0x562dc9,_0x5b7759),_0x35abcf&&await this[_0x3d03ba(0xe5)][_0x3d03ba(0xc7)](_0x562dc9,_0x35abcf);return;}catch(_0x2b786e){throw new common_1[(_0x3d03ba(0xdb))](_0x2b786e,common_1[_0x3d03ba(0xd0)][_0x3d03ba(0xe3)]);}}async[_0x3dfd47(0xd4)](_0x229cfa){const _0x370824=_0x3dfd47;return await this['redisClient'][_0x370824(0xd4)](_0x229cfa);}async[_0x3dfd47(0xc2)](_0x4b9887){const _0x2d4910=_0x3dfd47,{key:_0x40d53f}=_0x4b9887;await this[_0x2d4910(0xe5)][_0x2d4910(0xc2)](_0x40d53f);return;}async['saveToken'](_0x578fbe,_0x116698){const _0xcc3643=_0x3dfd47,_0x8944d=await this[_0xcc3643(0xe5)][_0xcc3643(0xcf)]('tokens:'+_0x578fbe,0x0,-0x1);await this[_0xcc3643(0xd1)](_0x578fbe,_0x8944d),this[_0xcc3643(0xe5)][_0xcc3643(0xbb)]('token:'+_0x578fbe,_0x116698);}async[_0x3dfd47(0xd1)](_0xbe3fd,_0x9b9e45){const _0x20d9f2=_0x3dfd47;_0x9b9e45[_0x20d9f2(0xbf)](_0x426317=>{const _0x48ffef=_0x20d9f2;this[_0x48ffef(0xe5)][_0x48ffef(0xc2)](_0x48ffef(0xdd)+_0xbe3fd+':'+_0x426317);});}async['checkTokenAuth'](_0xee4d96,_0xeea6f4,_0x41b102){const _0x30ff63=_0x3dfd47,_0x479037=await this[_0x30ff63(0xe5)][_0x30ff63(0xe2)](_0x30ff63(0xdd)+_0xeea6f4);if(_0x479037===null)return await this[_0x30ff63(0xe5)][_0x30ff63(0xbb)](_0x30ff63(0xdd)+_0xeea6f4,_0xee4d96),!![];if(_0x479037!==_0xee4d96){if([_0x30ff63(0xc4),'admin'][_0x30ff63(0xe1)](_0x41b102))return!![];throw new common_1[(_0x30ff63(0xdb))](_0x30ff63(0xc8),common_1['HttpStatus']['UNAUTHORIZED']);}}};function _0x57e6(){const _0x5034e0=['expire','您已在其他设备覆盖登录、请您重新登录！','__param','function','aaa','design:paramtypes','object','6028480suFTjm','zRange','HttpStatus','invalidateTokens','length','test','ttl','getOwnPropertyDescriptor','62643273ThqYDe','defineProperty','8655726jEoVQM','11583159djgULx','Inject','HttpException','1FjykgH','token:','__metadata','9xINJUp','1511518AFaOxf','includes','get','BAD_REQUEST','5vDoEhc','redisClient','10697824zFzLfp','__esModule','set','1146Wqdtho','onModuleInit','@nestjs/common','forEach','metadata','decorate','del','2016sGtDzh','super','RedisCacheService','Injectable'];_0x57e6=function(){return _0x5034e0;};return _0x57e6();}RedisCacheService=__decorate([(0x0,common_1[_0x3dfd47(0xc6)])(),__param(0x0,(0x0,common_1[_0x3dfd47(0xda)])('REDIS_CLIENT')),__metadata(_0x3dfd47(0xcc),[Object])],RedisCacheService),exports[_0x3dfd47(0xc5)]=RedisCacheService;